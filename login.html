<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration and Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <style>
        #style{
            display: flex;
            background-color:burlywood;
            border: 5px solid; 
            backdrop-filter: blur(350px);
        
        }
        .container{
            width:fit-content;
            height: fit-content;
        }
        #body{
            background-image: url(pexels-photo-585752.jpeg);
        }
    </style>
</head>
<body id="body" >
    <div class="container  d-flex justify-content-center " id="style" >
        <!-- Registration Form -->
        <form name="registerform" action="lodin2.html" onsubmit="return validateRegistration()" style="width:400px;" class="m-5 p-5">
            <h2 class="mb-4">User Registration</h2>
            <div>
                <label for="reg_username" class="form-label">User Name</label>
                <input type="text" id="reg_username" name="reg_username" class="form-control" placeholder="User name" required>
            </div>
            <div>
                <label for="reg_email" class="form-label">Email</label>
                <input type="email" id="reg_email" name="reg_email" class="form-control" placeholder="Email" required>
            </div>
            <div>
                <label for="reg_password" class="form-label">Password</label>
                <input type="password" id="reg_password" name="reg_password" class="form-control" placeholder="Password" required>
            </div>
            <div>
                <label for="reg_confirm" class="form-label">Confirm Password</label>
                <input type="password" id="reg_confirm" name="reg_confirm" class="form-control" placeholder="Confirm Password" required>
            </div>
            <div class="d-flex justify-content-center pt-4">
                <button class="btn btn-secondary" type="submit">Register</button>
            </div>
            <div class="d-flex justify-content-center">
                <p id="link" nama="link">Next Page <a href="lodin2.html">Login </a></p>
            </div>
        </form>

       
    </div>

    <script>
        // Registration Form Validation and Storage
        function validateRegistration() {
            let username = document.getElementById("reg_username").value;
            let email = document.getElementById("reg_email").value;
            let password = document.getElementById("reg_password").value;
            let confirm = document.getElementById("reg_confirm").value;

            if (username === "" || email === "" || password === "" || confirm === "") {
                alert("Please fill in all fields");
                return false;
            }

            if (password !== confirm) {
                alert("Passwords do not match");
                return false;
            }

            // Create an object to hold user data
            let user = {
                username: username,
                email: email,
                password: password
            };

            // Check if users array exists in localStorage
            let users = JSON.parse(localStorage.getItem("users")) || [];

            // Check if username or email already exists
            for (let existingUser of users) {
                if (existingUser.username === username || existingUser.email === email) {
                    alert("Username or email already exists");
                    return false;
                }
            }

            // Add new user to the array
            users.push(user);

            // Store updated users array in localStorage
            localStorage.setItem("users", JSON.stringify(users));

            // Optionally, you can clear the form after successful submission
            document.getElementById("reg_username").value = "";
            document.getElementById("reg_email").value = "";
            document.getElementById("reg_password").value = "";
            document.getElementById("reg_confirm").value = "";

            alert("Registration successful");
            return true;
        }

       
    </script>
</body>
</html>
